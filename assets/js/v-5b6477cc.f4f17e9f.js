(self.webpackChunkXray_docs_next=self.webpackChunkXray_docs_next||[]).push([[5745],{515:(n,a,e)=>{"use strict";e.r(a),e.d(a,{data:()=>s});const s={key:"v-5b6477cc",path:"/en/document/level-1/work.html",title:"Xray 的工作模式",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"单服务器模式",slug:"单服务器模式",children:[]},{level:2,title:"桥接模式",slug:"桥接模式",children:[]},{level:2,title:"工作原理",slug:"工作原理",children:[]}],filePathRelative:"en/document/level-1/work.md",git:{updatedTime:1622027153e3,contributors:[]}}},9564:(n,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>l});const s=(0,e(6252).uE)('<h1 id="xray-的工作模式"><a class="header-anchor" href="#xray-的工作模式">#</a> Xray 的工作模式</h1><h2 id="单服务器模式"><a class="header-anchor" href="#单服务器模式">#</a> 单服务器模式</h2><p>与其它的网络代理工具一样，你需要一台配置了 Xray 的服务器，然后在自己的设备上安装并配置 Xray 客户端，然后即可流畅地访问互联网。</p><div class="language-mermaid ext-mermaid line-numbers-mode"><pre class="language-mermaid"><code>graph LR;\nA(PC) -.- B(防火墙);\nB -.-&gt; C(墙外网站);\nA --&gt; D(Xray/VPS);\nD --&gt; C;\nA --&gt; E(墙内网站);\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>一个 Xray 服务器可同时支持多台设备使用不同的代理协议访问。同时，经过合理的配置，Xray 可以识别并区分需要代理以及不需要代理的流量，直连的流量不需要绕路。</p><h2 id="桥接模式"><a class="header-anchor" href="#桥接模式">#</a> 桥接模式</h2><p>如果你不想在每一台设备上都配置路由，你也可以设置一台中转服务器，用于接收客户端发来的所有流量，然后在服务器中进行转发判断。</p><div class="language-mermaid ext-mermaid line-numbers-mode"><pre class="language-mermaid"><code>graph LR;\nA(PC) -.-&gt; B(防火墙);\nB -.-&gt; C(墙外网站);\nA --&gt; D(墙内 VPS);\nD --&gt; E(墙外 VPS);\nE --&gt; C;\nD --&gt; F(墙内网站);\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="工作原理"><a class="header-anchor" href="#工作原理">#</a> 工作原理</h2><p>在配置 Xray 之前，不妨先来看一下 Xray 的工作原理，以下是单个 Xray 进程的内部结构示意图。多个 Xray 之间相互独立，互不影响。</p><div class="language-mermaid ext-mermaid line-numbers-mode"><pre class="language-mermaid"><code>graph LR;\nA1(inbound) --&gt; D(Dispatcher / Router / DNS);\nA2(inbound) --&gt; D;\nA3(inbound) --&gt; D;\nA4(inbound) --&gt; D;\nD --&gt; B1(outbound);\nD --&gt; B2(outbound);\nD --&gt; B3(outbound);\nD --&gt; B4(outbound);\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>需要配置至少一个入站连接（Inbound）和一个出站连接（Outbound）才可以正常工作。 <ul><li>入站连接负责与客户端（如浏览器）通信： <ul><li>入站连接通常可以配置用户认证，如 ID 和密码等；</li><li>入站连接收到数据之后，会交给分发器（Dispatcher）进行分发；</li></ul></li><li>出站连接负责将数据发给服务器，如另一台主机上的 Xray。</li></ul></li><li>当有多个出站连接时，可以配置路由（Routing）来指定某一类流量由某一个出站连接发出。 <ul><li>路由会在必要时查询 DNS 以获取更多信息来进行判断。</li></ul></li></ul>',12),l={render:function(n,a){return s}}}}]);